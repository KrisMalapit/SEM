@{
    ViewData["Title"] = "Dashboard";
}
<style>
    .modal-lg {
        width: 60% !important
    }


    .top-navigation .wrapper.wrapper-content {
        padding: 20px 10px 10px 10px !important;
    }

    .tabs-container .tabs-left .panel-body {
        width: 95% !important;
        margin-left: 5% !important;
    }

    .tabs-container .tabs-left > .nav-tabs, .tabs-container .tabs-right > .nav-tabs {
        width: 5% !important;
    }

    .panel {
        border-radius: 1px;
    }

    .panel-heading {
        border-top-left-radius: 1px;
        border-top-right-radius: 1px;
    }

    .modal-lg {
        width: 70% !important
    }

    .modal-sm {
        width: 30% !important
    }

    .modal-dialog {
        max-width: 100%;
        margin: 1.75rem auto;
    }

    #modalImage img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }
    video {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }
    #divSnapshotControllers {
        text-align: center;
    }
    #tblBicycleInfo td {
        border-top:#ffffff;
    }
</style>





<link href="~/css/plugins/select2/select2.min.css" rel="stylesheet">

<div class="modal inmodal in " id="modalSnapshot" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <h4 class="modal-title" id="modalSnapTitle">Capture Photo</h4>
                <small class="font-bold">Take snapshot of item</small>
            </div>
            <div class="modal-body">
                <input id="snapheaderid" type="hidden"/>
                <input id="snapheaderequipment" type="hidden"/>
                <div class="form-group col-md-12" id="divSnapshotControllers">
                    <input type=button value="Re-Take" onClick="configure()">
                    <input type=button value="Take Snapshot" onClick="take_snapshot()">
                    <input type=button value="Save Snapshot" onClick="saveSnap()">
                    <input type=button value="Close" data-dismiss="modal" class="btnCloseSnap" >
                </div>
                <div class="form-group col-md-12"  id="divSnapshotControllers" style="text-align:center;">
                    <div id="my_camera" style="margin: auto;"></div>
                    <div id="results"></div>
                </div>
               
            </div>
        </div>
    </div>
</div>

<div class="modal inmodal in " id="modalImage" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <h4 class="modal-title" id="modalSnapTitle">Captured Image</h4>

            </div>
            <div class="modal-body">

                <div class="form-group">
                    <img id="imgSnap" src="" />

                </div>
                <button type="button" class="btn btn-white btnCloseSnap" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<div class="modal inmodal in " id="modalItem" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <h4 class="modal-title" id="modalTitle"></h4>
                <small class="font-bold">List of items to be approve</small>
            </div>
            <div class="modal-body">
                <input id="type" type="hidden" />
                <div class="form-group">
                    <form id="frm">
                        <table id="tbl" class="table table-striped table-no-bordered table-hover dataTable" style="width: 100%!important">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Reference No</th>
                                    <th>Date</th>

                                    <th>Company</th>
                                    <th>Area</th>
                                    @*<th>Location</th>*@
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                        </table>
                    </form>
                </div>


                <button type="button" class="btn btn-white" data-dismiss="modal" onclick="location.reload();">Close</button>
                <button type="button" class="btn btn-primary" onclick="proceed();" id="btnApprove">Approve</button>
            </div>
        </div>

    </div>
</div>


<div class="tabs-container">
    <ul class="nav nav-tabs" role="tablist">
        @if (User.Identity.GetRoleName() != "User")
        {
            <li><a class="nav-link active" data-toggle="tab" href="#tab-main"> <i class="fa fa-bicycle"></i>Main</a></li>

            <li><a class="nav-link " data-toggle="tab" href="#tab-de"> <i class="fa fa-bicycle"></i>Data Entry</a></li>
        }
        else
        {
            @*<li><a class="nav-link " data-toggle="tab" href="#tab-main"> <i class="fa fa-bicycle"></i>Main</a></li>*@

            <li><a class="nav-link active" data-toggle="tab" href="#tab-de"> <i class="fa fa-bicycle"></i>Data Entry</a></li>
        }

    </ul>
    <div class="tab-content">

        @if (User.Identity.GetRoleName() != "User")
        {
            <div role="tabpanel" id="tab-main" class="tab-pane active" style="padding:20px;">
                <div class="row">
                    @if (User.Identity.GetRoleName() == "Reviewer" || User.Identity.GetRoleName() == "Admin")
                    {
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>Pending for Review</h5>
                                </div>
                                <div class="ibox-content">


                                    <table style="width:100%;">
                                        <tr>
                                            <td width="80%">
                                                Fire Extinguisher
                                                <a href="#" onclick="loadData(1);">(@ViewBag.ReviewFE)</a>
                                            </td>
                                            <td rowspan="4" style="text-align:center;">
                                                <div class="stat-percent font-bold text-success"> <i class="fa fa-search" style="font-size: 3.4em; line-height: 0px; letter-spacing: 0.002em; font-weight: 500;"></i></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Emergency Light <a href="#" onclick="loadData(2);">(@ViewBag.ReviewEL)</a></td>

                                        </tr>
                                        <tr>
                                            <td>Inergen Tank <a href="#" onclick="loadData(3);">(@ViewBag.ReviewIT)</a></td>

                                        </tr>
                                        <tr>
                                            <td>Fire Hydrant <a href="#" onclick="loadData(4);">(@ViewBag.ReviewFH)</a></td>

                                        </tr>

                                    </table>


                                </div>
                            </div>
                        </div>
                    }


                    @if (User.Identity.GetRoleName() == "Approver" || User.Identity.GetRoleName() == "Admin")
                    {
                        <div class="col-lg-3">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>Pending For Approval</h5>
                                </div>
                                <div class="ibox-content">
                                    <table style="width:100%;">
                                        <tr>
                                            <td width="80%">
                                                Fire Extinguisher
                                                <a href="#" onclick="loadData(5);">(@ViewBag.ApproverFE)</a>
                                            </td>
                                            <td rowspan="4" style="text-align:center;">
                                                <div class="stat-percent font-bold text-success"> <i class="fa fa-check" style="font-size: 3.4em; line-height: 0px; letter-spacing: 0.002em; font-weight: 500;"></i></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Emergency Light <a href="#" onclick="loadData(6);">(@ViewBag.ApproverEL)</a></td>
                                        </tr>
                                        <tr>
                                            <td>Inergen Tank <a href="#" onclick="loadData(7);">(@ViewBag.ApproverIT)</a></td>
                                        </tr>
                                        <tr>
                                            <td>Fire Hydrant <a href="#" onclick="loadData(8);">(@ViewBag.ApproverFH)</a></td>

                                        </tr>
                                        <tr>
                                            <td>Bicycle <a href="#" onclick="loadData(9);">(@ViewBag.ApproverBC)</a></td>

                                        </tr>
                                    </table>

                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        @{
            string divstat = "active";
        }
        @if (User.Identity.GetRoleName() != "User")
        {
            divstat = "";

        }

 

        <div role="tabpanel" id="tab-de" class="tab-pane @divstat" style="padding:20px;">
            <div class="tabs-container">
                <ul class="nav nav-tabs" role="tablist">
                    <li><a class="nav-link active" data-toggle="tab" href="#tab-1"> <i class="fa fa-gavel"></i>Equipment</a></li>
                    <li><a class="nav-link" data-toggle="tab" href="#tab-2"> <i class="fa fa-bicycle"></i>Bicycle</a></li>
                    <li><a class="nav-link" data-toggle="tab" href="#tab-0">Map</a></li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" id="tab-0" class="tab-pane">
                        <div class="panel-body">
                            Map
                        </div>
                    </div>
                    <div role="tabpanel" id="tab-1" class="tab-pane active">
                        <div class="panel-body">

                            <div class="panel panel-success">
                                <div class="panel-heading">
                                    Area Information
                                </div>

                                <div class="col-md-12" style="padding-top:10px;padding-bottom:10px;">
                                    <div class="row " style="margin-bottom:5px;">

                                        <label class="col-md-2 col-form-label" style="padding-top:5px; "> Area</label>
                                        <div class="col-md-4">
                                            <select id="AreaId" name="AreaId" class="form-control"></select>

                                        </div>

                                        <label class="col-md-2 col-form-label" style="padding-top:5px; "> Date</label>
                                        <div class="col-md-4">
                                            <input id="Date" name="Date" class="form-control" disabled="" value="@ViewBag.CreatedAt">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <label class="col-md-2 col-form-label" style="padding-top:5px;"> Plant</label>
                                        <div class="col-md-4">
                                            <input id="Plant" name="Plant" class="form-control" disabled="">

                                        </div>
                                    </div>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <div class="row col-md-4" style="font-size:20px;"><i class="fa fa-table" style="padding-top:5px;"></i> &nbsp; &nbsp; <label> Data Entry</label></div>
                                <br />
                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        <li><a class="nav-link active" data-toggle="tab" href="#tab-3">  <i class="fa fa-fire-extinguisher"></i> Fire Extinguisher</a></li>
                                        <li><a class="nav-link" data-toggle="tab" href="#tab-4"> <i class="fa fa-lightbulb-o"></i>Emergency Light</a></li>
                                        <li><a class="nav-link" data-toggle="tab" href="#tab-5"><i class="fa fa-battery-half"></i>Inergen System</a></li>

                                        <li><a class="nav-link" data-toggle="tab" href="#tab-6">  <i class="fa fa-fire"></i>Fire Hydrant</a></li>

                                        <li><a class="nav-link" data-toggle="tab" href="#tab-7"> <i class="fa fa-medkit"></i>EPR Equipment</a></li>

                                    </ul>
                                    <div class="tab-content">
                                        @*Fire Extinguisher*@
                                        <div id="tab-3" class="tab-pane active">
                                            <div class="_panel-body">
                                                <br />
                                                <div class="col-md-12 row">
                                                    <label class="col-md-2 col-form-label" style="padding-top:5px; "> Location</label>
                                                    <div class="col-md-4">
                                                        <select id="LocationIDFE" name="AreaId" class="form-control LocationID" style="width:100%;"></select>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <table id="tblFireExtinguisher" class="table table-striped table-no-bordered table-hover dataTable" style="width: 100%!important">
                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th width="20%">Item</th>
                                                                <th width="15%">Code</th>
                                                                <th width="15%">Type</th>
                                                                <th>Capacity</th>
                                                                <th>Cylinder</th>
                                                                <th>Lever</th>
                                                                <th>Gauge</th>
                                                                <th>Safety Seal</th>
                                                                <th>Hose</th>
                                                                <th width="20%">Remarks</th>
                                                                <th width="6%">Action</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>

                                                <div class="row col-md-12" id="divApproversFE">
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Inspected By</label>
                                                        <input class="form-control col-md-12 inpIns" name="InspectedBy" />
                                                        <label>Safety Inspector</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Reviewed By</label>
                                                        <input class="form-control col-md-12 inpRev" name="ReviewedBy" />
                                                        <label>OSH Coordinator</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Noted By</label>
                                                        <input class="form-control col-md-12 inpNot" name="NotedBy" />
                                                        <label>OIC Fire and Safety</label>
                                                    </div>
                                                </div>

                                            </div>
                                            <p>
                                                <a href="#" onclick="saveFireData(this);">
                                                    <i class="fa fa-check"></i>
                                                    <span class="email-text">&nbsp;Save</span>
                                                </a> <text> |&nbsp; </text>
                                                <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdFE","rptFireExtinguisher");'>
                                                    <i class="fa fa-print"></i>
                                                    <span class="print">&nbsp;Print</span>
                                                </a>
                                                <text> |&nbsp; </text>
                                                <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdFE","FE");'>
                                                    <i class="fa fa-check-square"></i>
                                                    <span class="save">&nbsp;Submit For Approval</span>
                                                </a>
                                            </p>
                                        </div>
                                        @*Emergency Light*@
                                        <div id="tab-4" class="tab-pane">
                                            <div class="_panel-body">
                                                <br />
                                                <div class="col-md-12 row">
                                                    <label class="col-md-2 col-form-label" style="padding-top:5px; "> Location</label>
                                                    <div class="col-md-4">
                                                        <select id="LocationIDEL" name="AreaId" class="form-control LocationID" style="width:100%"></select>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <table id="tblEmergencyLight" class="table table-striped table-no-bordered table-hover dataTable" style="width: 100%!important">

                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th width="20%">Item</th>
                                                                <th width="15%">Code</th>

                                                                <th>Battery</th>
                                                                <th>Bulb</th>
                                                                <th>Usable</th>

                                                                <th width="25%">Remarks</th>
                                                                <th width="6%">Action</th>
                                                            </tr>

                                                        </thead>

                                                    </table>
                                                </div>
                                                <div class="row col-md-12" id="divApproversEL">
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Inspected By</label>
                                                        <input class="form-control col-md-12 inpIns" name="InspectedBy" />
                                                        <label>Safety Inspector</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Reviewed By</label>
                                                        <input class="form-control col-md-12 inpRev" name="ReviewedBy" />
                                                        <label>OSH Coordinator</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Noted By</label>
                                                        <input class="form-control col-md-12 inpNot" name="NotedBy" />
                                                        <label>OIC Fire and Safety</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <p>
                                                <a href="#" onclick="saveEmergencyLight(this);">
                                                    <i class="fa fa-check"></i>
                                                    <span class="email-text">&nbsp;Save</span>
                                                </a> <text> |&nbsp; </text>
                                                <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdEL","rptEmergencyLight");'>

                                                    <i class="fa fa-print"></i>
                                                    <span class="print">&nbsp;Print</span>
                                                </a>
                                                <text> |&nbsp; </text>
                                                <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdEL","EL");'>
                                                    <i class="fa fa-check-square"></i>
                                                    <span class="print">&nbsp;Submit For Approval</span>
                                                </a>
                                            </p>
                                        </div>
                                        @*Inergen Tanks*@
                                        <div id="tab-5" class="tab-pane">
                                            <div class="_panel-body">
                                                <br />
                                                <div class="col-md-12 row">
                                                    <label class="col-md-2 col-form-label" style="padding-top:5px;">Location</label>
                                                    <div class="col-md-4">
                                                        <select id="LocationIDIT" name="AreaId" class="form-control LocationID" style="width:100%"></select>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <table id="tblInergenTank" class="table table-striped table-no-bordered table-hover dataTable" style="width: 100%!important">

                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th width="20%">Item</th>
                                                                <th width="15%">Code</th>

                                                                <th>Cylinder</th>
                                                                <th>Gauge</th>
                                                                <th>Hose</th>
                                                                <th>Pressure</th>

                                                                <th width="20%">Remarks</th>
                                                                <th width="6%">Action</th>
                                                            </tr>

                                                        </thead>

                                                    </table>
                                                </div>
                                                <div class="row col-md-12" id="divApproversIT">
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Inspected By</label>
                                                        <input class="form-control col-md-12 inpIns" name="InspectedBy" />
                                                        <label>Safety Inspector</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Reviewed By</label>
                                                        <input class="form-control col-md-12 inpRev" name="ReviewedBy" />
                                                        <label>OSH Coordinator</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Noted By</label>
                                                        <input class="form-control col-md-12 inpNot" name="NotedBy" />
                                                        <label>OIC Fire and Safety</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <p>
                                                <a href="#" onclick="saveInergenData(this);">
                                                    <i class="fa fa-check"></i>
                                                    <span class="email-text">&nbsp;Save</span>
                                                </a> <text> |&nbsp; </text>
                                                <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdIT","rptInergenTank");'>
                                                    <i class="fa fa-print"></i>
                                                    <span class="print">&nbsp;Print</span>
                                                </a><text> |&nbsp; </text>
                                                <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdIT","IT");'>
                                                    <i class="fa fa-check-square"></i>
                                                    <span class="print">&nbsp;Submit For Approval</span>
                                                </a>
                                            </p>
                                        </div>
                                        @*Fire Hydrant*@
                                        <div id="tab-6" class="tab-pane">
                                            <div class="_panel-body">
                                                <br />
                                                <div class="col-md-12 row">
                                                    <label class="col-md-2 col-form-label" style="padding-top:5px;">Location</label>
                                                    <div class="col-md-4">
                                                        <select id="LocationIDFH" name="AreaId" class="form-control LocationID" style="width:100%"></select>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <table id="tblFireHydrant" class="table table-striped table-no-bordered table-hover dataTable" style="width: 100%!important">

                                                        <thead>
                                                            <tr>
                                                                <th>ID</th>
                                                                <th width="20%">Item</th>
                                                                <th width="15%">Code</th>

                                                                <th>GlassCabinet</th>
                                                                <th>Hanger</th>
                                                                <th>1 1/2 Hose</th>
                                                                <th>1 1/2 Nozzle</th>
                                                                <th>2 1/2 Hose</th>
                                                                <th>2 1/2 Nozzle</th>
                                                                <th>SpecialTools</th>


                                                                <th width="20%">Remarks</th>
                                                                <th width="6%">Action</th>
                                                            </tr>

                                                        </thead>

                                                    </table>
                                                </div>
                                                <div class="row col-md-12" id="divApproversFH">
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Inspected By</label>
                                                        <input class="form-control col-md-12 inpIns" name="InspectedBy" />
                                                        <label>Safety Inspector</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Reviewed By</label>
                                                        <input class="form-control col-md-12 inpRev" name="ReviewedBy" />
                                                        <label>OSH Coordinator</label>
                                                    </div>
                                                    <div class="form-group col-md-4">
                                                        <label style="font-weight:bold;">Noted By</label>
                                                        <input class="form-control col-md-12 inpNot" name="NotedBy" />
                                                        <label>OIC Fire and Safety</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <p>
                                                <a href="#" onclick="saveFireHydrant(this);">
                                                    <i class="fa fa-check"></i>
                                                    <span class="email-text">&nbsp;Save</span>
                                                </a> <text> |&nbsp; </text>
                                                <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdFH","rptFireHydrant");'>
                                                    <i class="fa fa-print"></i>
                                                    <span class="print">&nbsp;Print</span>
                                                </a><text> |&nbsp; </text>
                                                <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdFH","FH");'>
                                                    <i class="fa fa-check-square"></i>
                                                    <span class="print">&nbsp;Submit For Approval</span>
                                                </a>
                                            </p>
                                        </div>
                                        @*EPR*@
                                        <div id="tab-7" class="tab-pane">
                                            <div class="_panel-body">
                                                <br />

                                            </div>
                                            <p>
                                                <a href="#" onclick="saveEPR(this);">
                                                    <i class="fa fa-check"></i>
                                                    <span class="email-text">&nbsp;Save</span>
                                                </a> <text> |&nbsp; </text>
                                                <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdEPR","rptEPR");'>
                                                    <i class="fa fa-print"></i>
                                                    <span class="print">&nbsp;Print</span>
                                                </a><text> |&nbsp; </text>
                                                <a href="#" onclick='submitApproval("@ViewBag.ReferenceIdEPR");'>
                                                    <i class="fa fa-check-square"></i>
                                                    <span class="print">&nbsp;Submit For Approval</span>
                                                </a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div role="tabpanel" id="tab-2" class="tab-pane">
                        <div class="panel-body">
                            <div class="panel panel-success">
                                <div class="panel-heading">
                                    Item Information
                                </div>

                                <div class="col-md-12" style="padding-top:10px;">
                                    @*<div class="row " style="margin-bottom:5px;">
                                        <label class="col-md-2 col-form-label" style="padding-top:5px; "> Identification No</label>
                                        <div class="col-md-2">
                                            <select id="BicycleId" name="BicycleId" class="form-control" asp-items="ViewBag.BicycleId"></select>

                                        </div>

                                        <label class="col-md-2 col-form-label" style="padding-top:5px; "> Date</label>
                                        <div class="col-md-2">
                                            <input id="Date" name="Date" class="form-control" disabled="" value="@ViewBag.CreatedAt">
                                        </div>

                                        <label class="col-md-2 col-form-label" style="padding-top:5px; "> Image</label>
                                    </div>
                                    <div class="row ">
                                        <label class="col-md-2 col-form-label" style="padding-top:5px;"> Name of Owner</label>
                                        <div class="col-md-2">
                                            <input id="NameOwner" name="NameOwner" class="form-control" disabled />
                                        </div>
                                        <label class="col-md-2 col-form-label" style="padding-top:5px;"> Brand Name</label>
                                        <div class="col-md-2">
                                            <input id="BrandName" name="BrandName" class="form-control" disabled />
                                        </div>
                                    </div>*@
                                    <input id="BikeDetailId" name="BikeDetailId" class="form-control" value="0" disabled type="hidden" />
                                    <table class="table" id="tblBicycleInfo">

                                        <tr>
                                            <td> Identification No</td>
                                            <td><select id="BicycleId" name="BicycleId" class="form-control" asp-items="ViewBag.BicycleId"></select></td>
                                            <td> Date</td>
                                            <td><input id="Date" name="Date" class="form-control" value="@ViewBag.CreatedAt" disabled /></td>
                                            <td>Image</td>
                                            <td rowspan="3" id="tdImg">

                                                @*  <img class="btnSnap" data-equipment='bc' data-id='" + $id + "' style="width:75px;height:75px;" src="~/snapshots/637588374938896190_fe13_webcam.jpg" />*@
                                                <img id="imgBike" style="width:130px;height:130px;" src="~/snapshots/no_image.png" />

                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Name of Owner</td>
                                            <td> <input id="NameOwner" name="NameOwner" class="form-control" disabled /></td>
                                            <td> Brand Name</td>
                                            <td><input id="BrandName" name="BrandName" class="form-control" disabled /></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>Company</td>
                                            <td> <input id="CompanyBike" name="Company" class="form-control" disabled /></td>
                                            <td> Department</td>
                                            <td><input id="DepartmentBike" name="Department" class="form-control" disabled /></td>
                                            <td></td>
                                        </tr>
                                    </table>
                                </div>


                            </div>
                            <div class="col-md-12">
                                <div class="row col-md-4" style="font-size:20px;"><i class="fa fa-table" style="padding-top:5px;"></i> &nbsp; &nbsp; <label> Data Entry</label></div>
                                <br />
                                <table class="table table-bordered" id="tblBicycle">
                                    <thead>
                                        <tr>
                                            <th style="width:5%;">Item No</th>
                                            <th style="width:55%;">Parts Description To Be Checked</th>
                                            <th style="width:5%;">Safe</th>
                                            <th style="width:5%;">UnSafe</th>
                                            <th style="width:30%;">Remarks</th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td rowspan="9" style="text-align:center; vertical-align:middle;font-size:24px">1</td>
                                            <td colspan="4">FRAME AND FIT</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Frame</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Are tubes in line and free of dents, bends?</li>
                                                    <li>Are the connection/welding of the frame intact?</li>
                                                    <li>Is the frame size appropriate for the height of the cyclist?</li>
                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">

                                                @*<input class="form-check-input" type="checkbox" id="FrameSafe" name="FrameSafe" value="">
                                                <span class="form-check-sign">
                                                    <span class="check"></span>
                                                </span>*@
                                                <input type="radio" id="FrameSafe" name="Frame" value="FrameSafe">

                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">

                                                @*<input class="form-check-input" type="checkbox" id="FrameUnSafe" name="FrameUnSafe" value="">
                                                <span class="form-check-sign">
                                                    <span class="check"></span>
                                                </span>*@
                                                <input type="radio" id="FrameUnSafe" name="Frame" value="FrameUnSafe">

                                            </td>
                                            <td contenteditable="true" id="FrameRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Front Fork</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Is the fork free of dents,bends and good condition?</li>
                                                    <li>Fork turn freely inside of headset?</li>
                                                    <li>Is the fork free of jolt? (Bearings are ok? / tightening is ok?)</li>
                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="FrontForkSafe" name="FrontForkSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="FrontForkSafe" name="FrontFork" value="FrontForkSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="FrontForkUnSafe" name="FrontForkUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="FrontForkUnSafe" name="FrontFork" value="FrontForkUnSafe">
                                            </td>
                                            <td contenteditable="true" id="FrontForkRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Handlebars</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Handle bars in line with front wheel?</li>
                                                    <li>Handle bars do not move when you hold the front wheel between your leg and try to twist?</li>
                                                    <li>Grips tight, in good condition?</li>
                                                    <li>Basket is properly installed in front handle bar?</li>
                                                    <li>Are reflectors properly installed in front and at the rear of the frame for proper visiblity</li>
                                                    <li>Are lights properly installed?</li>
                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="HandlebarSafe" name="HandlebarSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="HandlebarSafe" name="Handlebar" value="HandlebarSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="HandlebarUnSafe" name="HandlebarUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="HandlebarUnSafe" name="Handlebar" value="HandlebarUnSafe">
                                            </td>
                                            <td contenteditable="true" id="HandlebarRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Seat</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Saddle in good condition (no damage)</li>
                                                    <li>Saddle and seat post does not move when you grab hold and try to twist it side to side or up and down</li>

                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="SeatSafe" name="SeatSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="SeatSafe" name="Seat" value="SeatSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="SeatUnSafe" name="SeatUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="SeatUnSafe" name="Seat" value="SeatUnSafe">
                                            </td>
                                            <td contenteditable="true" id="SeatRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td rowspan="3" style="text-align:center; vertical-align:middle;font-size:24px;">2</td>
                                            <td colspan="4">AIR AND WHEELS</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Front and Rear Wheels</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Tire (Inflation) : Inflated properly and valve stem right?</li>
                                                    <li>Tire (Casing) : Good tread and no side wall damage?</li>
                                                    <li>Rims : No dent, twist, or kinks?</li>
                                                    <li>Alignment : When spun, wheel is true and centered in stays?</li>
                                                    <li>Complete wheel-spoke "rayos" and no bend?</li>
                                                    <li>Bearing : Wheel spins freely and evenly and does not wiggle?</li>
                                                    <li>Bike stand is peroperly installed?</li>
                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="FrontRearSafe" name="FrontRearSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="FrontRearSafe" name="FrontRear" value="FrontRearSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="FrontRearUnSafe" name="FrontRearUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="FrontRearUnSafe" name="FrontRear" value="FrontRearUnSafe">
                                            </td>
                                            <td contenteditable="true" id="FrontRearRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td rowspan="3" style="text-align:center; vertical-align:middle;font-size:24px;">3</td>
                                            <td colspan="4">BRAKES</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Disc Brake/V-Brake/Caliper Brake (Front and Rear)</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Cable taut, No frayed ends?</li>
                                                    <li>Caliber brake centered adn tight?</li>
                                                    <li>Nuts tight on brake shoe?</li>
                                                    <li>Brake pads are ok?</li>
                                                    <li>Front and rear brakes operate effectively and smoothly?</li>

                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="BrakeSafe" name="BrakeSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="BrakeSafe" name="Brake" value="BrakeSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="BrakeUnSafe" name="BrakeUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="BrakeUnSafe" name="Brake" value="BrakeUnSafe">
                                            </td>
                                            <td contenteditable="true" id="BrakeRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td rowspan="5" style="text-align:center; vertical-align:middle;font-size:24px;">4</td>
                                            <td colspan="4">CRANK AND CHAIN</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Cranks and Pedals</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Crank and turns freely and evenly. no looseness or binding, not bent?</li>
                                                    <li>Pedals tight, intact, no binding, free spinning?</li>


                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="CrankChainSafe" name="CrankChainSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="CrankChainSafe" name="CrankChain" value="CrankChainSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="CrankChainUnSafe" name="CrankChainUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="CrankChainUnSafe" name="CrankChain" value="CrankChainUnSafe">
                                            </td>
                                            <td contenteditable="true" id="CrankChainRemarks"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">Chain</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <ul>
                                                    <li>Chain clean and feee of rust, lubricated?</li>
                                                    <li>No excessive looseness?</li>
                                                    <li>Chain guard secure, free of chain?</li>

                                                </ul>
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="ChainSafe" name="ChainSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="ChainSafe" name="Chain" value="ChainSafe">
                                            </td>
                                            <td style="text-align:center;vertical-align:middle;">
                                                @*<div class="form-check form-check-inline">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" id="ChainUnSafe" name="ChainUnSafe" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>*@
                                                <input type="radio" id="ChainUnSafe" name="Chain" value="ChainUnSafe">
                                            </td>
                                            <td contenteditable="true" id="ChainRemarks"></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="ibox-content">

                                    <h4>
                                        Note
                                    </h4>
                                    <div class="alert alert-warning">
                                        Bike must meet item marked "SAFE" prior to use
                                    </div>

                                    <div class="row" id="divApproversB">
                                        <div class="form-group col-md-6">
                                            <label style="font-weight:bold;">Inspected By</label>
                                            <input class="form-control col-md-4" id="InspectedBy" name="InspectedBy" disabled />
                                            <label>Safety Inspector</label>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <label style="font-weight:bold;">Noted By</label>
                                            <input class="form-control col-md-4" id="NotedBy" name="NotedBy" disabled />
                                            <label>Safety Supervisor</label>
                                        </div>
                                    </div>

                                </div>
                                <br />
                                <p>
                                    <a href="#" onclick="saveBicycleData(this);">
                                        <i class="fa fa-check"></i>
                                        <span class="email-text">&nbsp;Save</span>
                                    </a> <text> |&nbsp; </text>
                                    <a class="aClick" href="#" onclick='print("@ViewBag.ReferenceIdB","rptBicycle");'>
                                        <i class="fa fa-print"></i>
                                        <span class="print">&nbsp;Print</span>
                                    </a>
                                    <text> |&nbsp; </text>
                                    <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdB","BC");'>
                                        <i class="fa fa-check-square"></i>
                                        <span class="save">&nbsp;Submit For Approval</span>
                                    </a>
                                </p>



                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>



<script>
    $(function () {
        dataClearBicycleData();
       
        if (parseInt($("#BicycleId").val()) > 0) {
            loadDatatableBicycle($("#BicycleId").val());
        }
        

    })

    $equipmentid = 0;
    $equipmenttype = "";
    $docstatus = "";
    $(document).on('click', '#imgBike', function () {
  
        if ($("#BikeDetailId").val() == 0) {
            toastr["error"]("Please save data first before uploading image")
            toastr.options = {
                "closeButton": true,
                "showDuration": "3000",
            }
            return false;
        }

        $("#snapheaderequipment").val($(this).attr('data-equipment'));
        $("#snapheaderid").val($(this).attr('data-id'));
        $("#modalSnapshot").modal("show");
        Webcam.set({
            width: 320,
            height: 240,
            image_format: 'jpeg',
            jpeg_quality: 90
        });
        Webcam.attach('#my_camera');
    })



    $(document).on('click', '.btnSnap', function () {
        $("#snapheaderequipment").val($(this).attr('data-equipment'));
        $("#snapheaderid").val($(this).attr('data-id'));
        $("#modalSnapshot").modal("show");
        Webcam.set({
            width: 320,
            height: 240,
            image_format: 'jpeg',
            jpeg_quality: 90
        });
        Webcam.attach('#my_camera');
    });

    $(document).on('click', '.btnView', function () {
        $imgid = $(this).attr('data-id')
        document.getElementById("imgSnap").src = "SEM/snapshots/" + $imgid;
        $("#modalImage").modal("show");

    });


    $(".btnCloseSnap").click(function () {

        $equipmenttype = $("#snapheaderequipment").val();

        if ($equipmenttype == "fe") {
            getDataPerLocation('LocationIDFE', $('#LocationIDFE').val());
        }
        if ($equipmenttype == "el") {
            getDataPerLocation('LocationIDEL', $('#LocationIDEL').val());
        }
        if ($equipmenttype == "it") {
            getDataPerLocation('LocationIDIT', $('#LocationIDIT').val());
        }
        if ($equipmenttype == "fh") {
            getDataPerLocation('LocationIDFH', $('#LocationIDFH').val());
        }
        if ($equipmenttype == "bc") {
            dataClearBicycleData();
            loadDatatableBicycle($("#BicycleId").val());
        }
        
        Webcam.reset();
    })
    function configure() {
        document.getElementById("imageprev").remove();
        $("#my_camera").removeAttr('hidden')
        Webcam.set({
            width: 320,
            height: 240,
            image_format: 'jpeg',
            jpeg_quality: 90
        });
        Webcam.attach('#my_camera');
        $("#imageprev").attr('hidden', 'hidden')
    }
    // Configure a few settings and attach camera
    function take_snapshot() {

        // take snapshot and get image data
        Webcam.snap(function (data_uri) {
            // display results in page
            document.getElementById('results').innerHTML =
                '<img id="imageprev" src="' + data_uri + '"/>';

            $("#my_camera").attr('hidden','hidden')
        });

        Webcam.reset();
    }
    function saveSnap() {
        // Get base64 value from <img id='imageprev'> source
        var base64image = document.getElementById("imageprev").src;
        Webcam.upload(base64image, '@Url.Action("saveSnapShot","Home")?equipmenttype=' + $("#snapheaderequipment").val() + '&detailid=' + + $("#snapheaderid").val(), function (code, text) {
            toastr["success"]("Snapshot saved!", "<b>Success</b> ")
        });

    }
    function loadData(id) {
        $equipmentid = id;


        if (id == 1 || id == 5) {
            $("#modalTitle").html("Fire Extinguisher");
            $equipmenttype = "fe";

        } else if (id == 2 || id == 6) {
            $("#modalTitle").html("Emergency Light");
            $equipmenttype = "el";

        } else if (id == 3 || id == 7) {
            $("#modalTitle").html("Inergen Tank");
            $equipmenttype = "it";

        }
        else if (id == 9) {
            $("#modalTitle").html("Bicycles");
            $equipmenttype = "bc";

        }
        else {
            $("#modalTitle").html("Fire Hydrant");
            $equipmenttype = "fh";

        }

        if (id < 5) {
            $docstatus = "For Review";
        } else {
            $docstatus = "For Approval";
        }



        var data = [];

        $.ajax({
            url: "@Url.Action("GetLocationData", "Home")"
            , method: "POST"
            , dataType: 'json'
            , data: { equipmenttype: $equipmenttype, docstatus: $docstatus }
            , success: function (responsedata) {
                if (responsedata.status == "success") {

                    for (var i = 0; i < responsedata.data.length; i++) {

                        var $id = responsedata.data[i].id;
                        var $date = moment(responsedata.data[i].createdAt).format("MM-DD-YYYY");
                         var linkDetails = "";
                        if (id == 1 || id == 5) {
                            linkDetails = "@Url.Action("Edit", "FireExtinguishers")?id=" + $id;

                        } else if (id == 2 || id == 6) {
                           linkDetails = "@Url.Action("Edit", "EmergencyLights")?id=" + $id;

                        } else if (id == 3 || id == 7) {
                            linkDetails = "@Url.Action("Edit", "InergenTanks")?id=" + $id;

                        }
                            else if (id ==9) {
                            linkDetails = "@Url.Action("Edit", "BicycleEntry")?id=" + $id;

                        }
                        else {
                           linkDetails = "@Url.Action("Edit", "FireHydrants")?id=" + $id;
                        }

                        if (id < 5) {
                            $docstatus = "For Review";
                        } else {
                            $docstatus = "For Approval";
                        }




                        $actions =
                            '<a title="Details" class="btn btn-info btn-bitbucket" href="' + linkDetails + '" target="_blank"><i class="fa fa-list"></i></a> ';

                        data.push([
                            responsedata.data[i].id
                            , responsedata.data[i].referenceNo
                            , $date

                            , responsedata.data[i].companyName
                            , responsedata.data[i].areaName
                            //, responsedata.data[i].location
                            , responsedata.data[i].documentStatus
                            , $actions]
                        );

                    }

                    if ($.fn.DataTable.isDataTable('#tbl')) {
                        $('#tbl').DataTable().destroy();

                    }

                    $('#tbl').DataTable({
                        "data": data,
                        "lengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                        "columnDefs": [
                            {
                                'targets': 0,
                                'orderable' : false,
                                'checkboxes': {
                                    'selectRow': true
                                }
                            },
                                {
                                'targets': 5,
                                'orderable': false
                            }

                        ],
                        'select': {
                            'style': 'multi'
                        },
                        order: [1, 'asc'],
                    });

                    //$("#type").val(id);
                    //if (id == 2) {
                    //    $("#btnApprove").attr('disabled',true)
                    //}
                    //if (id == 0) {
                    //    $("#btnApprove").hide();
                    //}

                    $("#modalItem").modal("show");



            } else {
                toastr["error"](responsedata.message)
                toastr.options = {
                    "closeButton": true,
                    "showDuration": "3000",
                }
            }

            }
        })
    }
    function proceed() {
        $id = $("#type").val();



        var table = $('#tbl').DataTable();
        var rows_selected = table.column(0).checkboxes.selected();
        data = [];

        $.each(rows_selected, function (index, rowId) {
            data.push(rowId );

        });


        if (data.length < 1) {
            toastr["error"]("No item selected")
            toastr.options = {
                "closeButton": true,
                "showDuration": "3000",
            };
        } else {

                $.ajax({
                url: "@Url.Action("Approve")"
                    , method: "POST"
                    , data: { id: data, docstatus: $docstatus, equipmenttype : $equipmenttype }
                    , dataType: 'json'
                    , success: function (responsedata) {
                        if (responsedata.status == "success") {
                            toastr["success"]("Data approved!", "<b>Success</b> ")
                            loadData($equipmentid);
                        } else {
                            toastr["error"](responsedata.message)
                            toastr.options = {
                                "closeButton": true,
                                "showDuration": "3000",
                            }
                        }
                    }
               })
        }
    }



        //var $hasNovalue = true;

        function submitApproval($refid, $module) {

            //console.log($hasNovalue);
            if ($refid == 0) {
                toastr["error"]("No record to be submitted")
                toastr.options = {
                    "closeButton": true,
                    "showDuration": "3000",
                }
            } else {



                    if (confirm('This will change status to For Approval Status. Continue?')) {
                        $.ajax({
                        url: "@Url.Action("SubmitDocument")"
                        , method: "POST"
                        , data: { id: $refid,module : $module }
                        , dataType: 'json'
                        , success: function (responsedata) {
                           if (responsedata.status == "success") {
                               toastr["success"]("Item Submitted","<b>Success</b> ")

                            } else {
                                toastr["error"](responsedata.message)
                                toastr.options = {
                                    "closeButton": true
                                   
                                }
                            }
                            }
                        })

                    }
            }

        }
   //printReport
    function print($refid,$rpt) {
        window.open('@Url.Action("printReport", "Reports")?ReferenceId=' + $refid+ '&Report=' + $rpt + '&rptType=PDF');
    }


    $(function () {


        $(".inpIns").val("@User.Identity.GetFullName()");
        //$(".inpRev").val("GBARROYO/ECCUETO");
        //$(".inpNot").val("HBLUCY");
        $(".inpIns").prop('disabled',true);
        $(".inpRev").prop('disabled',true);
        $(".inpNot").prop('disabled', true);



        $("#InspectedBy").val("@User.Identity.GetFullName()");
        //$("#NotedBy").val("HBLUCY");


        $("#AreaId").select2({
            width: '100%',
                ajax: {
                    url: "@Url.Action("SearchArea", "Areas")",
                    dataType: 'json',
                    delay: 2000,
                    data: function (params) {
                        return {
                            q: params.term, // search term
                            page: params.page
                        };
                    },
                    processResults: function (data, page) {
                        return {
                            results: data.items,

                        };
                    },

                    cache: false
            },
            minimumInputLength: 2,
        });


        $(".LocationID").select2();
        //loadDatatableFireExtinguisher($("#AreaId").val());
        //loadDatatableEmergencyLight($("#AreaId").val())
        //loadDatatableInergenTank($("#AreaId").val());
        //loadDatatableBicycle($("#BicycleId").val())
        //loadDatatableFireHydrant($("#AreaId").val())


    })
    $("#AreaId").change(function () {
        loadlocations(this.value)
        //loadDatatableFireExtinguisher(this.value);
        //loadDatatableEmergencyLight(this.value)
        //loadDatatableInergenTank(this.value)
        //loadDatatableFireHydrant(this.value)
    })

    $(".LocationID").change(function () {
        //console.log($(this).prop('id'));
        //console.log(this.value);
        getDataPerLocation($(this).prop('id'), this.value);
    })

    function getDataPerLocation(_locationtype, _locationid) {

        //FIRE EXTINNGUISHER -- LocationIDFE
        if (_locationtype == "LocationIDFE") {
            dataClearFireExtinguisherData();
            var data = [];
                $.ajax({
                            url: "@Url.Action("getDataPerLocation", "Areas")"
                                , method: "POST"
                                , dataType: 'json'
                                , data: { LocationType: _locationtype, LocationId: _locationid, dateTime: $("#Date").val() }
                                , success: function (responsedata) {


                                    if (responsedata.status == "success" && responsedata.data.length > 0) {
                                        var _but = "";
                                        if (responsedata.datadetail.length == 0) {
                                            //$hasNovalue = true;
                                            var $obj = $("#tblFireExtinguisher").closest('.tab-pane').find('.aClick');
                                            $($obj).attr('onclick', "print(" + 0 + ",'rptFireExtinguisher')");
                                            $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + 0 + ",'FE')");


                                            for (var i = 0; i < responsedata.data.length; i++) {
                                                var $id = responsedata.data[i].id;
                                                var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";
                                                var _cylinder = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Cylinder" >' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                var _lever = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Lever" >' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                var _gauge = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Gauge" >' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                var _safetyseal = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="SafetySeal" >' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                var _hose = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Hose" >' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';


                                                data.push([
                                                    responsedata.data[i].id
                                                    , responsedata.data[i].itemName
                                                    , responsedata.data[i].code
                                                    , responsedata.data[i].type
                                                    , responsedata.data[i].capacity
                                                    , _cylinder
                                                    , _lever
                                                    , _gauge
                                                    , _safetyseal
                                                    , _hose
                                                    , _remarks
                                                    , ""
                                                ]);

                                            }

                                        } else {
                                            //$hasNovalue = false;

                                            //console.log($hasNovalue);
                                            var $obj = $("#tblFireExtinguisher").closest('.tab-pane').find('.aClick');
                                            $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptFireExtinguisher')");
                                            $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + responsedata.datadetail[0].headerId + ",'FE')");

                                            var $div = $("#tblFireExtinguisher").closest('.tab-pane');
                                            $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                            $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                            $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)


                                            for (var i = 0; i < responsedata.datadetail.length; i++) {
                                                $id = responsedata.datadetail[i].detailid;

                                                $checkedValue = "";

                                                if (responsedata.datadetail[i].cylinder == 1) {
                                                    $checkedValue = 'checked';
                                                }

                                                var _cylinder =
                                                    '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type = "checkbox" value = "" name = "Cylinder" ' + $checkedValue + '>' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                $checkedValue = "";
                                                if (responsedata.datadetail[i].lever == 1) {
                                                    $checkedValue = 'checked';
                                                }

                                                var _lever = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Lever" ' + $checkedValue + '>' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                $checkedValue = "";
                                                if (responsedata.datadetail[i].gauge == 1) {
                                                    $checkedValue = 'checked';
                                                }

                                                var _gauge = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Gauge" ' + $checkedValue + '>' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                $checkedValue = "";
                                                if (responsedata.datadetail[i].safetySeal == 1) {
                                                    $checkedValue = 'checked';
                                                }

                                                var _safetyseal = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="SafetySeal" ' + $checkedValue + '>' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                $checkedValue = "";
                                                if (responsedata.datadetail[i].hose == 1) {
                                                    $checkedValue = 'checked';
                                                }

                                                var _hose = '<div class="form-check">' +
                                                    '<label class="form-check-label">' +
                                                    '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                                    '</label>' +
                                                    '</div>';

                                                var _rem = responsedata.datadetail[i].remarks == null ? "" : responsedata.datadetail[i].remarks;
                                                var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "' data-id='" + $id + "'>";
                                                _but = "<button class='btnSnap btn' type='button' class='btn btn-primary' data-equipment='fe' data-id='" + $id + "'><span class='glyphicon glyphicon-camera' ></span ></button>"
                                                $imageurl = responsedata.datadetail[i].imageUrl;
                                                if ($imageurl) {

                                                    _but += "<button class='btnView btn' type='button' class='btn btn-primary' data-id='" + $imageurl + "'><span class='glyphicon glyphicon-search' ></span ></button>"
                                                }

                                                data.push([
                                                    responsedata.datadetail[i].id
                                                    , responsedata.datadetail[i].itemName
                                                    , responsedata.datadetail[i].code
                                                    , responsedata.datadetail[i].type
                                                    , responsedata.datadetail[i].capacity
                                                    , _cylinder
                                                    , _lever
                                                    , _gauge
                                                    , _safetyseal
                                                    , _hose
                                                    , _remarks
                                                    , _but
                                                ]);

                                            }
                                        }
                                        if ($.fn.DataTable.isDataTable('#tblFireExtinguisher')) {
                                            $('#tblFireExtinguisher').DataTable().destroy();
                                        }
                                        $('#tblFireExtinguisher').DataTable({
                                            "data": data,
                                            "responsive": true,
                                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                                        });
                                    } else {
                                        if (responsedata.data.length < 1) {
                                            if ($.fn.DataTable.isDataTable('#tblFireExtinguisher')) {
                                                $('#tblFireExtinguisher').DataTable().destroy();
                                            }
                                            $('#tblFireExtinguisher').DataTable({
                                                "data": data,
                                                "responsive": true,
                                                "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                                            });

                                        }

                                    }

                    }
                    , error: function () {

                        if ($.fn.DataTable.isDataTable('#tblFireExtinguisher')) {
                            $('#tblFireExtinguisher').DataTable().destroy();
                        }
                        $('#tblFireExtinguisher').DataTable({
                            "data": data,
                            "responsive": true,
                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                        });
                    }
                });
        }

        //EMERGENCY LIGHTS -- LocationIDEL
        if (_locationtype == "LocationIDEL") {
             dataClearEmergencyLightData();
             var data = [];

             $.ajax({
                        url: "@Url.Action("getDataPerLocation", "Areas")"
                        , method: "POST"
                        , dataType: 'json'
                        , data: { LocationType: _locationtype, LocationId: _locationid, dateTime: $("#Date").val() }
                 , success: function (responsedata) {
                     var _but = "";
                                if (responsedata.status == "success" && responsedata.data.length > 0) {
                                    if (responsedata.datadetail.length == 0) {
                                        //$hasNovalue = true;
                                        var $obj = $("#tblEmergencyLight").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + 0 + ",'rptEmergencyLight')");
                                        $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + 0 + ",'EL')");



                                        for (var i = 0; i < responsedata.data.length; i++) {
                                            var $id = responsedata.data[i].id;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";
                                            var _battery = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Battery" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';
                                            var _bulb = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Bulb" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';
                                            var _usable = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Usable" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';
                                            data.push([
                                                responsedata.data[i].id
                                                , responsedata.data[i].itemName
                                                , responsedata.data[i].code

                                                , _battery
                                                , _bulb
                                                , _usable

                                                , _remarks,
                                                _but
                                            ]);

                                        }
                                    } else {
                                        //$hasNovalue = false;
                                        var $obj = $("#tblEmergencyLight").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptEmergencyLight')");
                                        $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + responsedata.datadetail[0].headerId + ",'EL')");

                                        var $div = $("#tblEmergencyLight").closest('.tab-pane');
                                        $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                        $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                        $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)

                                        for (var i = 0; i < responsedata.datadetail.length; i++) {
                                            var $id = responsedata.datadetail[i].detailid;

                                            $checkedValue = "";

                                            if (responsedata.datadetail[i].battery == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _battery =
                                                '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type = "checkbox" value = "" name = "Battery" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].bulb == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _bulb = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Bulb" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].usable == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _usable = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Usable" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';


                                            var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";
                                            _but = "<button class='btnSnap btn' type='button' class='btn btn-primary' data-equipment='el' data-id='" + $id + "'><span class='glyphicon glyphicon-camera' ></span ></button>"
                                            $imageurl = responsedata.datadetail[i].imageUrl;
                                            if ($imageurl) {

                                                _but += "<button class='btnView btn' type='button' class='btn btn-primary' data-id='" + $imageurl + "'><span class='glyphicon glyphicon-search' ></span ></button>"
                                            }

                                            data.push([
                                                responsedata.datadetail[i].id
                                                , responsedata.datadetail[i].itemName
                                                , responsedata.datadetail[i].code

                                                , _battery
                                                , _bulb
                                                , _usable

                                                , _remarks,
                                                _but
                                            ]);

                                        }
                                    }

                                    if ($.fn.DataTable.isDataTable('#tblEmergencyLight')) {
                                        $('#tblEmergencyLight').DataTable().destroy();
                                    }
                                    $('#tblEmergencyLight').DataTable({
                                        "data": data,
                                        "responsive": true,
                                        "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                                    });
                                } else {
                                    if (responsedata.data.length < 1) {



                                        if ($.fn.DataTable.isDataTable('#tblEmergencyLight')) {
                                            $('#tblEmergencyLight').DataTable().destroy();
                                        }
                                        $('#tblEmergencyLight').DataTable({
                                            "data": data,
                                            "responsive": true,
                                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                                        });

                                    }

                                }

                 }
                 , error: function () {

                     if ($.fn.DataTable.isDataTable('#tblEmergencyLight')) {
                         $('#tblEmergencyLight').DataTable().destroy();
                     }
                     $('#tblEmergencyLight').DataTable({
                         "data": data,
                         "responsive": true,
                         "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                     });
                 }
            });
        }
        //INERGEN TANK -- LocationIDIT
        if (_locationtype == "LocationIDIT") {
            dataClearInergenTankData();
            var data = [];

            $.ajax({
                url: "@Url.Action("getDataPerLocation", "Areas")"
                , method: "POST"
                , dataType: 'json'
                , data: { LocationType: _locationtype, LocationId: _locationid, dateTime: $("#Date").val() }
                , success: function (responsedata) {
                    var _but = "";
                    if (responsedata.status == "success" && responsedata.data.length > 0) {

                        if (responsedata.datadetail.length == 0) {
                            //$hasNovalue = true;
                            var $obj = $("#tblInergenTank").closest('.tab-pane').find('.aClick');
                            $($obj).attr('onclick', "print(" + 0 + ",'rptInergenTank')");
                            $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + 0 + ",'IT')");

                        for (var i = 0; i < responsedata.data.length; i++) {

                            var $id = responsedata.data[i].id;



                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";



                            var _cylinder = '<div class="form-check">' +
                                '<label class="form-check-label">' +
                                '<input class="form-check-input" type="checkbox" value="" name="Cylinder" >' +
                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                '</label>' +
                                '</div>';

                            var _gauge = '<div class="form-check">' +
                                '<label class="form-check-label">' +
                                '<input class="form-check-input" type="checkbox" value="" name="Gauge" >' +
                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                '</label>' +
                                '</div>';

                            var _hose = '<div class="form-check">' +
                                '<label class="form-check-label">' +
                                '<input class="form-check-input" type="checkbox" value="" name="Hose" >' +
                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                '</label>' +
                                '</div>';

                            var _pressure = '<div class="form-check">' +
                                '<label class="form-check-label">' +
                                '<input class="form-check-input" type="checkbox" value="" name="Pressure" >' +
                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                '</label>' +
                                '</div>';

                            data.push([
                                responsedata.data[i].id
                                , responsedata.data[i].itemName
                                , responsedata.data[i].code

                                , _cylinder
                                , _gauge
                                , _hose
                                , _pressure

                                , _remarks,_but
                                ]);

                            }
                        } else {
                            //$hasNovalue = false;
                            var $obj = $("#tblInergenTank").closest('.tab-pane').find('.aClick');
                            $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptInergenTank')");
                            $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + responsedata.datadetail[0].headerId + ",'IT')");

                            var $div = $("#tblInergenTank").closest('.tab-pane');
                            $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                            $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                            $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)

                            for (var i = 0; i < responsedata.datadetail.length; i++) {
                                var $id = responsedata.datadetail[i].detailid;

                                $checkedValue = "";

                                if (responsedata.datadetail[i].cylinder == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _cylinder =
                                    '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type = "checkbox" value = "" name = "Cylinder" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].gauge == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _gauge = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Gauge" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].hose == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _hose = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].pressure == 1) {
                                    $checkedValue = 'checked';
                                }
                                var _pressure = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;
                                var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";

                                _but = "<button class='btnSnap btn' type='button' class='btn btn-primary' data-equipment='it' data-id='" + $id + "'><span class='glyphicon glyphicon-camera' ></span ></button>"
                                $imageurl = responsedata.datadetail[i].imageUrl;
                                if ($imageurl) {

                                    _but += "<button class='btnView btn' type='button' class='btn btn-primary' data-id='" + $imageurl + "'><span class='glyphicon glyphicon-search' ></span ></button>"
                                }

                                data.push([
                                    responsedata.datadetail[i].id
                                    , responsedata.datadetail[i].itemName
                                    , responsedata.datadetail[i].code

                                    , _cylinder
                                    , _gauge
                                    , _hose
                                    , _pressure

                                    , _remarks, _but
                                ]);

                            }

                        }
                        if ($.fn.DataTable.isDataTable('#tblInergenTank')) {
                            $('#tblInergenTank').DataTable().destroy();
                        }
                        $('#tblInergenTank').DataTable({
                            "data": data,
                            "responsive": true,
                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                            //"columnDefs": [
                            //    {
                            //        visible: false,
                            //        targets: [0]
                            //    },
                            //],
                        });
                    } else {
                        if (responsedata.data.length < 1) {



                            if ($.fn.DataTable.isDataTable('#tblInergenTank')) {
                                $('#tblInergenTank').DataTable().destroy();
                            }
                            $('#tblInergenTank').DataTable({
                                "data": data,
                                "responsive": true,
                                "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                //"columnDefs": [
                                //    {
                                //        visible: false,
                                //        targets: [0]
                                //    },
                                //],
                            });

                        }

                    }

                }, error: function () {
                    console.log("erro");
                    if ($.fn.DataTable.isDataTable('#tblInergenTank')) {
                        $('#tblInergenTank').DataTable().destroy();
                    }
                    $('#tblInergenTank').DataTable({
                        "data": data,
                        "responsive": true,
                        "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                    });
                }
            });
        }
        //FIRE HYDRANT -- LocationIDFH
        if (_locationtype == "LocationIDFH") {

            dataClearFireHydrantData();
            var data = [];
             $.ajax({
                    url: "@Url.Action("getDataPerLocation", "Areas")"
                    , method: "POST"
                    , dataType: 'json'
                    , data: { LocationType: _locationtype, LocationId: _locationid, dateTime: $("#Date").val() }
                    , success: function (responsedata) {
                        var _but = "";
                        if (responsedata.status == "success" && responsedata.data.length > 0) {


                            if (responsedata.datadetail.length == 0) {
                                //$hasNovalue = true;
                                var $obj = $("#tblFireHydrant").closest('.tab-pane').find('.aClick');
                                $($obj).attr('onclick', "print(" + 0 + ",'rptFireHydrant')");
                                $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + 0 + ",'FH')");


                                for (var i = 0; i < responsedata.data.length; i++) {
                                    var $id = responsedata.data[i].id;
                                    var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";
                                    var _glassCabinet = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="GlassCabinet" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    var _hanger = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hanger" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    var _hose15 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hose15" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';
                                    var _nozzle15 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Nozzle15" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    var _hose25 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hose25" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    var _nozzle25 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Nozzle25" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    var _specialTools = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="SpecialTools" >' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';


                                    data.push([
                                        responsedata.data[i].id
                                        , responsedata.data[i].itemName
                                        , responsedata.data[i].code

                                        , _glassCabinet
                                        , _hanger
                                        , _hose15
                                        , _nozzle15
                                        , _hose25
                                        , _nozzle25
                                        , _specialTools

                                        , _remarks, _but
                                    ]);

                                }
                            } else {
                                //$hasNovalue = false;
                                var $obj = $("#tblFireHydrant").closest('.tab-pane').find('.aClick');
                                $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptFireHydrant')");
                                $($obj).siblings(".aApprove").attr('onclick', "submitApproval(" + responsedata.datadetail[0].headerId + ",'FH')");

                                var $div = $("#tblFireHydrant").closest('.tab-pane');
                                $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)


                                for (var i = 0; i < responsedata.datadetail.length; i++) {


                                    var $id = responsedata.datadetail[i].detailid;
                                    $checkedValue = "";

                                    if (responsedata.datadetail[i].glassCabinet == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _glassCabinet =
                                        '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type = "checkbox" value = "" name = "GlassCabinet" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].hanger == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _hanger = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hanger" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].hose15 == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _hose15 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hose15" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';


                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].nozzle15 == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _nozzle15 =
                                        '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type = "checkbox" value = "" name = "Nozzle15" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].hose25 == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _hose25 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Hose25" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].nozzle25 == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _nozzle25 = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="Nozzle25" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';

                                    $checkedValue = "";
                                    if (responsedata.datadetail[i].specialTools == 1) {
                                        $checkedValue = 'checked';
                                    }

                                    var _specialTools = '<div class="form-check">' +
                                        '<label class="form-check-label">' +
                                        '<input class="form-check-input" type="checkbox" value="" name="SpecialTools" ' + $checkedValue + '>' +
                                        '<span class="form-check-sign"><span class="check"></span></span>' +
                                        '</label>' +
                                        '</div>';




                                    var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;

                                    var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";

                                    _but = "<button class='btnSnap btn' type='button' class='btn btn-primary' data-equipment='fh' data-id='" + $id + "'><span class='glyphicon glyphicon-camera' ></span ></button>"
                                    $imageurl = responsedata.datadetail[i].imageUrl;
                                    if ($imageurl) {

                                        _but += "<button class='btnView btn' type='button' class='btn btn-primary' data-id='" + $imageurl + "'><span class='glyphicon glyphicon-search' ></span ></button>"
                                    }

                                    data.push([
                                          responsedata.datadetail[i].id
                                        , responsedata.datadetail[i].itemName
                                        , responsedata.datadetail[i].code

                                        , _glassCabinet
                                        , _hanger
                                        , _hose15
                                        , _nozzle15
                                        , _hose25
                                        , _nozzle25
                                        , _specialTools

                                        , _remarks
                                        , _but
                                    ]);

                                }
                            }

                            if ($.fn.DataTable.isDataTable('#tblFireHydrant')) {
                                $('#tblFireHydrant').DataTable().destroy();
                            }
                            $('#tblFireHydrant').DataTable({
                                "data": data,
                                "responsive": true,
                                "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                //"columnDefs": [
                                //    {
                                //        visible: false,
                                //        targets: [0]
                                //    },
                                //],
                            });
                        } else {
                            if (responsedata.data.length < 1) {



                                if ($.fn.DataTable.isDataTable('#tblFireHydrant')) {
                                    $('#tblFireHydrant').DataTable().destroy();
                                }
                                $('#tblFireHydrant').DataTable({
                                    "data": data,
                                    "responsive": true,
                                    "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                    //"columnDefs": [
                                    //    {
                                    //        visible: false,
                                    //        targets: [0]
                                    //    },
                                    //],
                                });

                            }

                        }

                 }, error: function () {


                     if ($.fn.DataTable.isDataTable('#tblFireHydrant')) {
                         $('#tblFireHydrant').DataTable().destroy();
                     }
                        $('#tblFireHydrant').DataTable({
                         "data": data,
                         "responsive": true,
                         "lengthMenu": [[50, 100, -1], [50, 100, "All"]],

                     });
                 }
                });
        }

    }






    $("#BicycleId").change(function () {
        dataClearBicycleData();
         loadDatatableBicycle($(this).val());
    });
        $("input[type=text]").keyup(function () {
            $(this).val($(this).val().toUpperCase());
    });



    function saveBicycleData($obj) {

        var data = [];

        $("#tblBicycle input[type='radio']").each(function () {
            $name = $(this).prop('id');
            $name_value = 0;
            if ($(this).is(':checked')) {
                $name_value = 1;
            } else {
                $name_value = 0;
            }
            data.push({ name: $name, value: $name_value });
        });



        $("#tblBicycle td[contenteditable=true]").each(function () {
            $name = $(this).prop('id');
            $name_value = document.getElementById($name).innerHTML;
            $name_value = $name_value.replace("<br>", "");
            data.push({ name: $name, value: $name_value });
        });

        data.push({ name: "BicycleId", value: $("#BicycleId").val() });
        data.push({ name: "InspectedBy", value: $("#InspectedBy").val() });
        data.push({ name: "NotedBy", value: $("#NotedBy").val() });




        $.ajax({
            url: "@Url.Action("CreateModifyBicycle", "BicycleEntry")"
            , method: "POST"
            , data: data
            , dataType: 'json'
            , success: function (responsedata) {

                if (responsedata.status == "success") {

                    toastr["success"]("Data saved!","<b>Success</b>")
                    toastr.options = {
                        "showDuration": "2000",
                    }
                    $("#BikeDetailId").val(responsedata.referenceId);
                    $($obj).siblings("a.aClick").attr('onclick', "print(" + responsedata.referenceId + ",'rptBicycle')");
                    $($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'BC')");

                    @*<text> |&nbsp; </text>
                    <a class="aApprove" href="#" onclick='submitApproval("@ViewBag.ReferenceIdB","BC");'>
                        <i class="fa fa-check-square"></i>
                        <span class="save">&nbsp;Submit For Approval</span>
                    </a>*@

                    //loadDatatableBicycle($("BicycleId").val());



                } else {

                    toastr["error"](responsedata.message)
                    toastr.options = {
                        "closeButton": true,
                        "showDuration": "3000",
                    }
                }
            }
        })


    }
    function dataClearBicycleData() {
        $("#tblBicycle td[contenteditable=true]").each(function () {
            $(this).html('');
        });
        $("#tblBicycle input[type='radio']").each(function () {
            $(this).prop('checked', 0);
        });

        $("#divApproversB input").each(function () {
          //  $(this).prop('value', '');
        });

        $("#BikeDetailId").val(0);
    }

    function loadlocations(_area) {

        $.ajax({
            url: "@Url.Action("getLocation", "Areas")"
            , method: "POST"
            , dataType: 'json'
            , data: { areaid: _area }

            , success: function (responsedata) {
                $("#Plant").val(responsedata.company);

                $(".LocationID").empty();

                if ($.trim(responsedata.datafe)) {
                    $.each(responsedata.datafe, function (value, index) {
                        $('#LocationIDFE').append('<option value="' + index.id + '">' + index.location + '</option>');
                    });
                }
                getDataPerLocation('LocationIDFE', $('#LocationIDFE').val());
                if ($.trim(responsedata.datael)) {
                    $.each(responsedata.datael, function (value, index) {
                        $('#LocationIDEL').append('<option value="' + index.id + '">' + index.location + '</option>');
                    });
                }
                getDataPerLocation('LocationIDEL', $('#LocationIDEL').val());
                if ($.trim(responsedata.datafh)) {
                    $.each(responsedata.datafh, function (value, index) {
                        $('#LocationIDFH').append('<option value="' + index.id + '">' + index.location + '</option>');
                    });
                }
                getDataPerLocation('LocationIDFH', $('#LocationIDFH').val());

                if ($.trim(responsedata.datait)) {
                    $.each(responsedata.datait, function (value, index) {
                        $('#LocationIDIT').append('<option value="' + index.id + '">' + index.location + '</option>');
                    });
                }
                getDataPerLocation('LocationIDIT', $('#LocationIDIT').val());


            }
        })
    }
    function loadDatatableBicycle(_Bicycle) {
      
       


         $.ajax({
                        url: "@Url.Action("getDataPerIdentificationNo", "BicycleEntry")"
                            , method: "POST"
                            , dataType: 'json'
                            , data: { BicycleId: _Bicycle}
                            , success: function (responsedata) {

                                if (responsedata.status == "success") {
                                    $("#NameOwner").val(responsedata.data[0].nameOwner);
                                    $("#BrandName").val(responsedata.data[0].brandName);
                                    $("#CompanyBike").val(responsedata.data[0].company);
                                    $("#DepartmentBike").val(responsedata.data[0].department);


                                    if (responsedata.datadetail != null) {
                                        console.log(responsedata.datadetail.imageUrl);
                                        var $obj = $("#tblBicycle").closest('.tab-pane').find('.aClick');
                                        var $obj2 = $("#tblBicycle").closest('.tab-pane').find('.aApprove');
                                        $($obj).attr('onclick', "print(" + responsedata.datadetail.bicycleEntryHeaderId + ",'rptBicycle')");
                                        $($obj2).attr('onclick', "submitApproval(" + responsedata.datadetail.bicycleEntryHeaderId + ",'BC')");
                                        //$($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'BC')");


                                        $("#BikeDetailId").val(responsedata.datadetail.id);


                                        $("#tblBicycleInfo").find("img").remove();

                                      
                                        $imgsrc = "";
                                        if (responsedata.datadetail.imageUrl == null) {
                                          
                                            $imgsrc = "no_image.png";

                                        } else {
                                           
                                            $imgsrc = responsedata.datadetail.imageUrl ;
                                        }

                                        //$img = '<img id="imgBike" data-equipment="bc" data-id="' + responsedata.datadetail.id + '" style="width:75px;height:75px;" src="/snapshots/' + $imgsrc + '"/>'; TEST
                                        $img = '<img id="imgBike" data-equipment="bc" data-id="' + responsedata.datadetail.id + '" style="width:130px;height:130px;" src="/SEM/snapshots/' + $imgsrc + '"/>'; //LIVE

                                        $("td#tdImg").html($img);

                                        $('#FrameSafe').prop('checked', responsedata.datadetail.frameSafe);
                                        $('#FrameUnSafe').prop('checked', responsedata.datadetail.frameUnSafe);
                                        $('#FrameRemarks').html(responsedata.datadetail.frameRemarks);

                                        $('#FrontForkSafe').prop('checked', responsedata.datadetail.frontForkSafe);
                                        $('#FrontForkUnSafe').prop('checked', responsedata.datadetail.frontForkUnSafe);
                                        $('#FrontForkRemarks').html(responsedata.datadetail.frontForkRemarks);

                                        $('#HandlebarSafe').prop('checked', responsedata.datadetail.handlebarSafe);
                                        $('#HandlebarUnSafe').prop('checked', responsedata.datadetail.handlebarUnSafe);
                                        $('#HandlebarRemarks').html(responsedata.datadetail.handlebarRemarks);

                                        $('#SeatSafe').prop('checked', responsedata.datadetail.seatSafe);
                                        $('#SeatUnSafe').prop('checked', responsedata.datadetail.seatUnSafe);
                                        $('#SeatRemarks').html(responsedata.datadetail.seatRemarks);

                                        $('#FrontRearSafe').prop('checked', responsedata.datadetail.frontRearSafe);
                                        $('#FrontRearUnSafe').prop('checked', responsedata.datadetail.frontRearUnSafe);
                                        $('#FrontRearRemarks').html(responsedata.datadetail.frontRearRemarks);

                                        $('#BrakeSafe').prop('checked', responsedata.datadetail.brakeSafe);
                                        $('#BrakeUnSafe').prop('checked', responsedata.datadetail.brakeUnSafe);
                                        $('#BrakeRemarks').html(responsedata.datadetail.brakeRemarks);

                                        $('#CrankChainSafe').prop('checked', responsedata.datadetail.crankChainSafe);
                                        $('#CrankChainUnSafe').prop('checked', responsedata.datadetail.crankChainUnSafe);
                                        $('#CrankChainRemarks').html(responsedata.datadetail.crankChainRemarks);

                                        $('#ChainSafe').prop('checked', responsedata.datadetail.chainSafe);
                                        $('#ChainUnSafe').prop('checked', responsedata.datadetail.chainUnSafe);
                                        $('#ChainRemarks').html(responsedata.datadetail.chainRemarks);

                                        $('#InspectedBy').val(responsedata.datadetail.inspectedBy);
                                        $('#NotedBy').val(responsedata.datadetail.notedBy);

                                    } else {

                                        console.log("noimage");
                                        var $obj = $("#tblBicycle").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + 0 + ",'rptBicycle')");

                                        //$img = '<img id="imgBike" data-equipment="bc" data-id="0" style="width:75px;height:75px;" src="/SEM/snapshots/no_image.png" />'; //TEST
                                        $img = '<img id="imgBike" data-equipment="bc" data-id="0" style="width:130px;height:130px;" src="/SEM/snapshots/no_image.png" />'; //LIVE
                                        $("td#tdImg").html($img);
                                        
                                    }


                                }

                            }
            });

    }
    function dataClearFireExtinguisherData() {
        $("#tblFireExtinguisher td[contenteditable=true]").each(function () {
            $(this).html('');
        });
        $("#tblFireExtinguisher input[type='checkbox']").each(function () {
            $(this).prop('checked', 0);
        });

        $("#divApproversFE input").each(function () {
            //$(this).prop('value', '');

        });
    }
        //FIRE EXTINGUISHER
        function loadDatatableFireExtinguisher(_area) {
        @*dataClearFireExtinguisherData();
        var data = [];

         $.ajax({
                        url: "@Url.Action("getDataPerArea", "FireExtinguishers")"
                            , method: "POST"
                            , dataType: 'json'
                            , data: { AreaId: _area, dateTime: $("#Date").val() }
                            , success: function (responsedata) {

                                if (responsedata.status == "success" && responsedata.data.length > 0) {
                                    $("#Plant").val(responsedata.data[0].companyName);




                                    if (responsedata.datadetail.length == 0) {

                                        for (var i = 0; i < responsedata.data.length; i++) {

                                            var $id = responsedata.data[i].id;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";
                                            var _cylinder = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Cylinder" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _lever = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Lever" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _gauge = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Gauge" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _safetyseal = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="SafetySeal" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _hose = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Hose" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            data.push([
                                                responsedata.data[i].id
                                                , responsedata.data[i].location
                                                , responsedata.data[i].code
                                                , responsedata.data[i].type
                                                , responsedata.data[i].capacity
                                                , _cylinder
                                                , _lever
                                                , _gauge
                                                , _safetyseal
                                                , _hose
                                                , _remarks
                                            ]);

                                        }

                                    } else {

                                        var $obj = $("#tblFireExtinguisher").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptFireExtinguisher')");

                                        var $div = $("#tblFireExtinguisher").closest('.tab-pane');
                                        $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                        $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                        $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)


                                        for (var i = 0; i < responsedata.datadetail.length; i++) {

                                            $checkedValue = "";

                                            if (responsedata.datadetail[i].cylinder == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _cylinder =
                                                '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type = "checkbox" value = "" name = "Cylinder" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].lever == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _lever = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Lever" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].gauge == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _gauge = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Gauge" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].safetySeal == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _safetyseal = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="SafetySeal" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].hose == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _hose = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "' data-id='" + $id + "'>";

                                            data.push([
                                                responsedata.datadetail[i].id
                                                , responsedata.datadetail[i].location
                                                , responsedata.datadetail[i].code
                                                , responsedata.datadetail[i].type
                                                , responsedata.datadetail[i].capacity
                                                , _cylinder
                                                , _lever
                                                , _gauge
                                                , _safetyseal
                                                , _hose
                                                , _remarks
                                            ]);

                                        }
                                    }







                                    if ($.fn.DataTable.isDataTable('#tblFireExtinguisher')) {
                                        $('#tblFireExtinguisher').DataTable().destroy();
                                    }
                                    $('#tblFireExtinguisher').DataTable({
                                        "data": data,
                                        "responsive": true,
                                        "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                        //"columnDefs": [
                                        //    {
                                        //        visible: false,
                                        //        targets: [0]
                                        //    },
                                        //],
                                    });
                                } else {
                                    if (responsedata.data.length < 1) {



                                        if ($.fn.DataTable.isDataTable('#tblFireExtinguisher')) {
                                            $('#tblFireExtinguisher').DataTable().destroy();
                                        }
                                        $('#tblFireExtinguisher').DataTable({
                                            "data": data,
                                            "responsive": true,
                                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                            //"columnDefs": [
                                            //    {
                                            //        visible: false,
                                            //        targets: [0]
                                            //    },
                                            //],
                                        });

                                    }

                                }

                            }
            });*@






        }

        function saveFireData ($obj) {


            var items = [];
            $("#tblFireExtinguisher tbody tr").each(function () {
                var lst = [];

                $("#divApproversFE input").each(function () {
                    $n = $(this).prop('name');
                    $v = $(this).prop('value');
                    var o = {
                        name: $n,
                        value: $v
                    };
                    lst.push(o);
                });

                $inspectedBy = lst[0].value
                $reviewedBy = lst[1].value
                $notedBy = lst[2].value



                var obj = {
                    ItemID: $(this).find("td:eq(0)").text(),
                    Cylinder: $(this).find('input:checkbox')[0].checked,
                    Lever: $(this).find('input:checkbox')[1].checked,
                    Gauge: $(this).find('input:checkbox')[2].checked,
                    SafetySeal: $(this).find('input:checkbox')[3].checked,
                    Hose: $(this).find('input:checkbox')[4].checked,
                    Remarks: $(this).find("td:eq(10)").find("input").val().trim(),
                    AreaId: $("#AreaId").val(),
                    LocationFireExtinguisherId: $("#LocationIDFE").val(),
                    ID: @ViewBag.ID,
                    InspectedBy: $inspectedBy,
                    ReviewedBy: $reviewedBy,
                    NotedBy: $notedBy,
                    };

                    items.push(obj)

            });

            $.ajax({
                url: "@Url.Action("SaveData","FireExtinguishers")"
                , type: "POST"
                , dataType: "json"
                , data: { item: items }
                     , success: function (responsedata) {

                        if (responsedata.status == "success") {

                            toastr["success"]("Item saved!", "<b>Success</b> ")

                            $($obj).siblings("a.aClick").attr('onclick', "print(" + responsedata.referenceId + ",'rptFireExtinguisher')");
                            $($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'FE')");
                            getDataPerLocation('LocationIDFE', $('#LocationIDFE').val());



                        } else {

                            toastr["error"](responsedata.message)
                            toastr.options = {
                                "closeButton": true,
                                
                            }
                        }
                    }
                })
            

    }

    function dataClearEmergencyLightData() {
        $("#tblEmergencyLight td[contenteditable=true]").each(function () {
            $(this).html('');
        });
        $("#tblEmergencyLight input[type='checkbox']").each(function () {
            $(this).prop('checked', 0);
        });

        $("#divApproversEL input").each(function () {
           // $(this).prop('value', '');
        });
    }
    //EMERGENCY LIGHT
    function loadDatatableEmergencyLight(_area) {
        @*dataClearEmergencyLightData();
        var data = [];

         $.ajax({
                        url: "@Url.Action("getDataPerArea", "EmergencyLights")"
                            , method: "POST"
                            , dataType: 'json'
                            , data: { AreaId: _area, dateTime: $("#Date").val() }
                            , success: function (responsedata) {

                                if (responsedata.status == "success" && responsedata.data.length > 0) {

                                    $("#Plant").val(responsedata.data[0].companyName);



                                    if (responsedata.datadetail.length == 0) {
                                        for (var i = 0; i < responsedata.data.length; i++) {

                                            var $id = responsedata.data[i].id;



                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";



                                            var _battery = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Battery" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _bulb = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Bulb" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _usable = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Usable" >' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';



                                            data.push([
                                                responsedata.data[i].id
                                                , responsedata.data[i].location
                                                , responsedata.data[i].code

                                                , _battery
                                                , _bulb
                                                , _usable

                                                , _remarks
                                            ]);

                                        }
                                    } else {
                                        var $obj = $("#tblEmergencyLight").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptEmergencyLight')");

                                        var $div = $("#tblEmergencyLight").closest('.tab-pane');
                                        $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                        $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                        $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)

                                        for (var i = 0; i < responsedata.datadetail.length; i++) {
                                            var $id = responsedata.datadetail[i].id;

                                            $checkedValue = "";

                                            if (responsedata.datadetail[i].battery == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _battery =
                                                '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type = "checkbox" value = "" name = "Battery" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].bulb == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _bulb = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Bulb" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].usable == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _usable = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Usable" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';


                                            var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";

                                            data.push([
                                                responsedata.datadetail[i].id
                                                , responsedata.datadetail[i].location
                                                , responsedata.datadetail[i].code

                                                , _battery
                                                , _bulb
                                                , _usable

                                                , _remarks
                                            ]);

                                        }
                                    }

                                    if ($.fn.DataTable.isDataTable('#tblEmergencyLight')) {
                                        $('#tblEmergencyLight').DataTable().destroy();
                                    }
                                    $('#tblEmergencyLight').DataTable({
                                        "data": data,
                                        "responsive": true,
                                        "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                        //"columnDefs": [
                                        //    {
                                        //        visible: false,
                                        //        targets: [0]
                                        //    },
                                        //],
                                    });
                                } else {
                                    if (responsedata.data.length < 1) {



                                        if ($.fn.DataTable.isDataTable('#tblEmergencyLight')) {
                                            $('#tblEmergencyLight').DataTable().destroy();
                                        }
                                        $('#tblEmergencyLight').DataTable({
                                            "data": data,
                                            "responsive": true,
                                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                            //"columnDefs": [
                                            //    {
                                            //        visible: false,
                                            //        targets: [0]
                                            //    },
                                            //],
                                        });

                                    }

                                }

                            }
            });*@






        }

    function saveEmergencyLight($obj) {


            var items = [];
            $("#tblEmergencyLight tbody tr").each(function () {
                var lst = [];

                $("#divApproversEL input").each(function () {
                    $n = $(this).prop('name');
                    $v = $(this).prop('value');
                    var o = {
                        name: $n,
                        value: $v
                    };
                    lst.push(o);
                });

                $inspectedBy = lst[0].value
                $reviewedBy = lst[1].value
                $notedBy = lst[2].value

                     var obj = {
                         ItemID: $(this).find("td:eq(0)").text(),
                         Battery: $(this).find('input:checkbox')[0].checked,
                         Bulb: $(this).find('input:checkbox')[1].checked,
                         Usable: $(this).find('input:checkbox')[2].checked,

                         Remarks: $(this).find("td:eq(6)").find("input").val(),
                         AreaId: $("#AreaId").val(),
                         LocationEmergencyLightId: $("#LocationIDEL").val(),
                         ID: @ViewBag.ID,
                         InspectedBy: $inspectedBy,
                         ReviewedBy: $reviewedBy,
                         NotedBy: $notedBy,

                }



                    items.push(obj)

            });






            $.ajax({
                url: "@Url.Action("SaveData", "EmergencyLights")"
                , type: "POST"
                , dataType: "json"
                , data: { item: items }
                     , success: function (responsedata) {

                        if (responsedata.status == "success") {

                            toastr["success"]("Item saved!", "<b>Success</b> ")
                            $($obj).siblings("a.aClick").attr('onclick', "print(" + responsedata.referenceId + ",'rptEmergencyLight')");
                            $($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'EL')");

                            getDataPerLocation('LocationIDEL', $('#LocationIDEL').val());

                        } else {

                            toastr["error"](responsedata.message)
                            toastr.options = {
                                "closeButton": true,
                               
                            }
                        }
                    }
                })


       

    }
    function dataClearInergenTankData() {
        $("#tblInergenTank td[contenteditable=true]").each(function () {
            $(this).html('');
        });
        $("#tblInergenTank input[type='checkbox']").each(function () {
            $(this).prop('checked', 0);
        });

        $("#divApproversIT input").each(function () {
           // $(this).prop('value', '');
        });
    }
    //INERGEN TANK
    function loadDatatableInergenTank(_area) {
        @*dataClearInergenTankData();
        var data = [];

         $.ajax({
                        url: "@Url.Action("getDataPerArea", "InergenTanks")"
                            , method: "POST"
                            , dataType: 'json'
             , data: { AreaId: _area, dateTime: $("#Date").val() }
                            , success: function (responsedata) {

                                if (responsedata.status == "success" && responsedata.data.length > 0) {

                                    $("#Plant").val(responsedata.data[0].companyName);
                                    console.log("INERGEN : " + responsedata.datadetail);


                                    if (responsedata.datadetail.length == 0) {
                                    for (var i = 0; i < responsedata.data.length; i++) {

                                        var $id = responsedata.data[i].id;



                                        var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";



                                        var _cylinder = '<div class="form-check">' +
                                            '<label class="form-check-label">' +
                                            '<input class="form-check-input" type="checkbox" value="" name="Cylinder" >' +
                                            '<span class="form-check-sign"><span class="check"></span></span>' +
                                            '</label>' +
                                            '</div>';

                                        var _gauge = '<div class="form-check">' +
                                            '<label class="form-check-label">' +
                                            '<input class="form-check-input" type="checkbox" value="" name="Gauge" >' +
                                            '<span class="form-check-sign"><span class="check"></span></span>' +
                                            '</label>' +
                                            '</div>';

                                        var _hose = '<div class="form-check">' +
                                            '<label class="form-check-label">' +
                                            '<input class="form-check-input" type="checkbox" value="" name="Hose" >' +
                                            '<span class="form-check-sign"><span class="check"></span></span>' +
                                            '</label>' +
                                            '</div>';

                                        var _pressure = '<div class="form-check">' +
                                            '<label class="form-check-label">' +
                                            '<input class="form-check-input" type="checkbox" value="" name="Pressure" >' +
                                            '<span class="form-check-sign"><span class="check"></span></span>' +
                                            '</label>' +
                                            '</div>';

                                        data.push([
                                            responsedata.data[i].id
                                            , responsedata.data[i].location
                                            , responsedata.data[i].code

                                            , _cylinder
                                            , _gauge
                                            , _hose
                                            , _pressure

                                            , _remarks
                                           ]);

                                        }
                                    } else {
                                        var $obj = $("#tblInergenTank").closest('.tab-pane').find('.aClick');
                                        $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptInergenTank')");

                                        var $div = $("#tblInergenTank").closest('.tab-pane');
                                        $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                                        $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                                        $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)

                                        for (var i = 0; i < responsedata.datadetail.length; i++) {
                                            var $id = responsedata.datadetail[i].id;

                                            $checkedValue = "";

                                            if (responsedata.datadetail[i].cylinder == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _cylinder =
                                                '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type = "checkbox" value = "" name = "Cylinder" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].gauge == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _gauge = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Gauge" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].hose == 1) {
                                                $checkedValue = 'checked';
                                            }

                                            var _hose = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            $checkedValue = "";
                                            if (responsedata.datadetail[i].pressure == 1) {
                                                $checkedValue = 'checked';
                                            }
                                            var _pressure = '<div class="form-check">' +
                                                '<label class="form-check-label">' +
                                                '<input class="form-check-input" type="checkbox" value="" name="Hose" ' + $checkedValue + '>' +
                                                '<span class="form-check-sign"><span class="check"></span></span>' +
                                                '</label>' +
                                                '</div>';

                                            var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;
                                            var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";

                                            data.push([
                                                responsedata.datadetail[i].id
                                                , responsedata.datadetail[i].location
                                                , responsedata.datadetail[i].code

                                                , _cylinder
                                                , _gauge
                                                , _hose
                                                , _pressure

                                                , _remarks
                                            ]);

                                        }

                                    }
                                    if ($.fn.DataTable.isDataTable('#tblInergenTank')) {
                                        $('#tblInergenTank').DataTable().destroy();
                                    }
                                    $('#tblInergenTank').DataTable({
                                        "data": data,
                                        "responsive": true,
                                        "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                        //"columnDefs": [
                                        //    {
                                        //        visible: false,
                                        //        targets: [0]
                                        //    },
                                        //],
                                    });
                                } else {
                                    if (responsedata.data.length < 1) {



                                        if ($.fn.DataTable.isDataTable('#tblInergenTank')) {
                                            $('#tblInergenTank').DataTable().destroy();
                                        }
                                        $('#tblInergenTank').DataTable({
                                            "data": data,
                                            "responsive": true,
                                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                            //"columnDefs": [
                                            //    {
                                            //        visible: false,
                                            //        targets: [0]
                                            //    },
                                            //],
                                        });

                                    }

                                }

                            }
            });*@






        }

    function saveInergenData($obj) {


            var items = [];
            $("#tblInergenTank tbody tr").each(function () {
                var lst = [];

                $("#divApproversIT input").each(function () {
                    $n = $(this).prop('name');
                    $v = $(this).prop('value');
                    var o = {
                        name: $n,
                        value: $v
                    };
                    lst.push(o);
                });

                $inspectedBy = lst[0].value
                $reviewedBy = lst[1].value
                $notedBy = lst[2].value

                var obj = {

                         ItemId: $(this).find("td:eq(0)").text(),

                         Cylinder: $(this).find('input:checkbox')[0].checked,
                         Gauge: $(this).find('input:checkbox')[1].checked,
                         Hose: $(this).find('input:checkbox')[2].checked,
                         Pressure: $(this).find('input:checkbox')[3].checked,


                         Remarks: $(this).find("td:eq(7)").find("input").val(),
                         AreaId: $("#AreaId").val(),
                         LocationInergenTankId: $("#LocationIDIT").val(),
                         ID: @ViewBag.ID,
                         InspectedBy: $inspectedBy,
                         ReviewedBy: $reviewedBy,
                         NotedBy: $notedBy,

                }


                    items.push(obj)


                });



            $.ajax({
                url: "@Url.Action("SaveData", "InergenTanks")"
                , type: "POST"
                , dataType: "json"
                , data: { item: items }
                     , success: function (responsedata) {

                        if (responsedata.status == "success") {

                            toastr["success"]("Item saved!", "<b>Success</b> ")
                            $($obj).siblings("a.aClick").attr('onclick', "print(" + responsedata.referenceId + ",'rptInergenTank')");
                            $($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'IT')");
                            getDataPerLocation('LocationIDIT', $('#LocationIDIT').val());
                        } else {

                            toastr["error"](responsedata.message)
                            toastr.options = {
                                "closeButton": true,
                                "showDuration": "3000",
                            }
                        }
                    }
                })
        

    }

    function dataClearFireHydrantData() {
        $("#tblFireHydrant td[contenteditable=true]").each(function () {
            $(this).html('');
        });
        $("#tblFireHydrant input[type='checkbox']").each(function () {
            $(this).prop('checked', 0);
        });

        $("#divApproversFH input").each(function () {
           // $(this).prop('value', '');
        });
    }
     //FIRE HYDRANT
    function loadDatatableFireHydrant(_area) {
        @*dataClearFireHydrantData();
        var data = [];

         $.ajax({
            url: "@Url.Action("getDataPerArea", "FireHydrants")"
                , method: "POST"
                , dataType: 'json'
                , data: { AreaId: _area, dateTime: $("#Date").val() }
                , success: function (responsedata) {

                    if (responsedata.status == "success" && responsedata.data.length > 0) {

                        $("#Plant").val(responsedata.data[0].companyName);



                        if (responsedata.datadetail.length == 0) {
                            for (var i = 0; i < responsedata.data.length; i++) {




                                var $id = responsedata.data[i].id;



                                var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();'  value='' data-id='" + $id + "'>";



                                var _glassCabinet = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="GlassCabinet" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _hanger = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hanger" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _hose15 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose15" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';
                                var _nozzle15 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Nozzle15" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _hose25 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose25" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _nozzle25 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Nozzle25" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                var _specialTools = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="SpecialTools" >' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';


                                data.push([
                                    responsedata.data[i].id
                                    , responsedata.data[i].location
                                    , responsedata.data[i].code

                                    , _glassCabinet
                                    , _hanger
                                    , _hose15
                                    , _nozzle15
                                    , _hose25
                                    , _nozzle25
                                    , _specialTools

                                    , _remarks
                                ]);

                            }
                        } else {
                            var $obj = $("#tblFireHydrant").closest('.tab-pane').find('.aClick');
                            $($obj).attr('onclick', "print(" + responsedata.datadetail[0].headerId + ",'rptFireHydrant')");

                            var $div = $("#tblFireHydrant").closest('.tab-pane');
                            $($div.find('.inpIns')).prop('value', responsedata.datadetail[0].inspectedBy)
                            $($div.find('.inpRev')).prop('value', responsedata.datadetail[0].reviewedBy)
                            $($div.find('.inpNot')).prop('value', responsedata.datadetail[0].notedBy)


                            for (var i = 0; i < responsedata.datadetail.length; i++) {


                                var $id = responsedata.datadetail[i].id;
                                $checkedValue = "";

                                if (responsedata.datadetail[i].glassCabinet == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _glassCabinet =
                                    '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type = "checkbox" value = "" name = "GlassCabinet" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].hanger == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _hanger = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hanger" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].hose15 == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _hose15 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose15" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';



                                if (responsedata.datadetail[i].nozzle15 == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _nozzle15 =
                                    '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type = "checkbox" value = "" name = "Nozzle15" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].hose25 == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _hose25 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Hose25" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].nozzle25 == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _nozzle25 = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="Nozzle25" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';

                                $checkedValue = "";
                                if (responsedata.datadetail[i].specialTools == 1) {
                                    $checkedValue = 'checked';
                                }

                                var _specialTools = '<div class="form-check">' +
                                    '<label class="form-check-label">' +
                                    '<input class="form-check-input" type="checkbox" value="" name="SpecialTools" ' + $checkedValue + '>' +
                                    '<span class="form-check-sign"><span class="check"></span></span>' +
                                    '</label>' +
                                    '</div>';




                                var _rem = responsedata.datadetail[i].remarks === null ? "" : responsedata.datadetail[i].remarks;

                                var _remarks = "<input class='form-control' style='width:100%' onfocus='this.select();' value='" + _rem + "'>";

                                data.push([
                                    responsedata.datadetail[i].id
                                    , responsedata.datadetail[i].location
                                    , responsedata.datadetail[i].code

                                    , _glassCabinet
                                    , _hanger
                                    , _hose15
                                    , _nozzle15
                                    , _hose25
                                    , _nozzle25
                                    , _specialTools

                                    , _remarks
                                ]);

                            }
                        }

                        if ($.fn.DataTable.isDataTable('#tblFireHydrant')) {
                            $('#tblFireHydrant').DataTable().destroy();
                        }
                        $('#tblFireHydrant').DataTable({
                            "data": data,
                            "responsive": true,
                            "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                            //"columnDefs": [
                            //    {
                            //        visible: false,
                            //        targets: [0]
                            //    },
                            //],
                        });
                    } else {
                        if (responsedata.data.length < 1) {



                            if ($.fn.DataTable.isDataTable('#tblFireHydrant')) {
                                $('#tblFireHydrant').DataTable().destroy();
                            }
                            $('#tblFireHydrant').DataTable({
                                "data": data,
                                "responsive": true,
                                "lengthMenu": [[50, 100, -1], [50, 100, "All"]],
                                //"columnDefs": [
                                //    {
                                //        visible: false,
                                //        targets: [0]
                                //    },
                                //],
                            });

                        }

                    }

                }
            });*@






        }
    function saveFireHydrant($obj) {


            var items = [];
            $("#tblFireHydrant tbody tr").each(function () {
                var lst = [];

                $("#divApproversFH input").each(function () {
                    $n = $(this).prop('name');
                    $v = $(this).prop('value');
                    var o = {
                        name: $n,
                        value: $v
                    };
                    lst.push(o);
                });

                $inspectedBy = lst[0].value
                $reviewedBy = lst[1].value
                $notedBy = lst[2].value

                     var obj = {


                         ItemId: $(this).find("td:eq(0)").text(),

                         GlassCabinet: $(this).find('input:checkbox')[0].checked,
                         Hanger: $(this).find('input:checkbox')[1].checked,
                         Hose15: $(this).find('input:checkbox')[2].checked,
                         Nozzle15: $(this).find('input:checkbox')[3].checked,
                         Hose25: $(this).find('input:checkbox')[4].checked,
                         Nozzle25: $(this).find('input:checkbox')[5].checked,
                         SpecialTools: $(this).find('input:checkbox')[6].checked,


                         Remarks: $(this).find("td:eq(10)").find("input").val().trim(),
                         AreaId: $("#AreaId").val(),
                         LocationFireHydrantId: $("#LocationIDFH").val(),
                         ID: @ViewBag.ID,
                         InspectedBy: $inspectedBy,
                         ReviewedBy: $reviewedBy,
                         NotedBy: $notedBy,

                }

                    items.push(obj)


                });




            $.ajax({
                url: "@Url.Action("SaveData", "FireHydrants")"
                , type: "POST"
                , dataType: "json"
                , data: { item: items }
                     , success: function (responsedata) {

                        if (responsedata.status == "success") {

                            toastr["success"]("Item saved!", "<b>Success</b> ")
                            $($obj).siblings("a.aClick").attr('onclick', "print(" + responsedata.referenceId + ",'rptFireHydrant')");
                            $($obj).siblings("a.aApprove").attr('onclick', "submitApproval(" + responsedata.referenceId + ",'FH')");
                            getDataPerLocation('LocationIDFH', $('#LocationIDFH').val());
                        } else {

                            toastr["error"](responsedata.message)
                            toastr.options = {
                                "closeButton": true,
                                "showDuration": "3000",
                            }
                        }
                    }
                })

        
    }
</script>
